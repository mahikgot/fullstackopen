(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),u=(t(22),t(3)),o=t(2),a=t(0),i=function(e){var n=e.value,t=e.onChange;return Object(a.jsx)("form",{children:Object(a.jsxs)("div",{children:["filter shown with: ",Object(a.jsx)("input",{value:n,onChange:t})]})})},s=t(7),d=t(4),f=t.n(d),b="/api/persons",l={getAll:function(){return f.a.get(b).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(b,"/").concat(e))},add:function(e){return f.a.post(b,e)}},j=function(e){var n=e.newName,t=e.setNewName,r=e.setNewNumber,c=e.newNumber,u=e.persons,o=e.setPersons,i=e.setNotif;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=u.findIndex((function(e){return e.name===n}));if(-1!==a)window.confirm("".concat(n," is already added to Phonebook, replace the old number with a new one?"))&&l.update(u[a].id,Object(s.a)(Object(s.a)({},u[a]),{},{number:c})).then((function(e){return o(u.map((function(n){return n.id!==u[a].id?n:e})))})).then((function(){return i({error:!1,message:"Successfully update ".concat(u[a].name)})})).catch((function(){return i({error:!0,message:"Information of ".concat(u[a].name," has already been removed from the server")})}));else{var d={name:n,number:c};l.add(d).then((function(e){return o(u.concat(e))})).then((function(){return i({error:!1,message:"Successfully added ".concat(d.name)})})).catch((function(e){return i({error:!0,message:e.response.data.error})}))}t(""),r(""),setTimeout((function(){return i(null)}),5e3)},children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:c,onChange:function(e){return r(e.target.value)}})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},m=t(17),h=function(e){var n=e.remove,t=e.persons,r=e.setPersons,c=e.newFilter;return Object(a.jsx)(a.Fragment,{children:function(e,n){var t=n.map((function(e){return e.name.toUpperCase()})).map((function(n){return n.includes(e.toUpperCase())}));return n.filter((function(e,n){return Object(m.a)(e),t[n]}))}(c,t).map((function(e){return Object(a.jsxs)("div",{children:[e.name," ",e.number,Object(a.jsx)("button",{onClick:function(){return function(e){window.confirm("are u sure u want to delete ".concat(e.name))&&n(e.id),r([])}(e)},children:"delete"})]},e.name)}))})},O=function(e){var n=e.notif;if(null===n)return null;var t={color:!0===n.error?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:5};return Object(a.jsx)("div",{style:t,children:n.message})},p=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),s=Object(u.a)(c,2),d=s[0],f=s[1],b=Object(o.useState)(""),m=Object(u.a)(b,2),p=m[0],v=m[1],g=Object(o.useState)(""),x=Object(u.a)(g,2),w=x[0],N=x[1],S=Object(o.useState)(null),y=Object(u.a)(S,2),k=y[0],C=y[1];return Object(o.useEffect)((function(){return l.getAll().then((function(e){return r(e)}))}),[t.length]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(O,{notif:k}),Object(a.jsx)(i,{value:w,onChange:function(e){return N(e.target.value)}}),Object(a.jsx)("h3",{children:"add a new"}),Object(a.jsx)(j,{newName:d,setNewName:function(e){return f(e)},setNewNumber:function(e){return v(e)},newNumber:p,persons:t,setPersons:function(e){return r(e)},setNotif:function(e){return C(e)}}),Object(a.jsx)("h3",{children:"Numbers"}),Object(a.jsx)(h,{remove:l.remove,persons:t,setPersons:function(e){return r(e)},newFilter:w})]})};c.a.render(Object(a.jsx)(p,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.bfee9630.chunk.js.map