(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(16),u=t.n(r),c=(t(22),t(3)),o=t(2),a=t(0),i=function(e){var n=e.value,t=e.onChange;return Object(a.jsx)("form",{children:Object(a.jsxs)("div",{children:["filter shown with: ",Object(a.jsx)("input",{value:n,onChange:t})]})})},s=t(7),d=t(4),b=t.n(d),f="/api/persons",j={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(f,"/").concat(e))},add:function(e){return b.a.post(f,e).then((function(e){return e.data}))}},l=function(e){var n=e.newName,t=e.setNewName,r=e.setNewNumber,u=e.newNumber,c=e.persons,o=e.setPersons,i=e.setNotif;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=c.findIndex((function(e){return e.name===n}));if(-1!==a)window.confirm("".concat(n," is already added to Phonebook, replace the old number with a new one?"))&&j.update(c[a].id,Object(s.a)(Object(s.a)({},c[a]),{},{number:u})).then((function(e){return o(c.map((function(n){return n.id!==c[a].id?n:e})))})).then((function(){return i({error:!1,message:"Successfully update ".concat(c[a].name)})})).catch((function(e){return i({error:!0,message:e.response.data.error})}));else{var d={name:n,number:u};j.add(d).then((function(e){return o(c.concat(e))})).then((function(){return i({error:!1,message:"Successfully added ".concat(d.name)})})).catch((function(e){return i({error:!0,message:e.response.data.error})}))}t(""),r(""),setTimeout((function(){return i(null)}),1e3)},children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:u,onChange:function(e){return r(e.target.value)}})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},m=t(17),h=function(e){var n=e.remove,t=e.persons,r=e.setPersons,u=e.newFilter;return Object(a.jsx)(a.Fragment,{children:function(e,n){var t=n.map((function(e){return e.name.toUpperCase()})).map((function(n){return n.includes(e.toUpperCase())}));return n.filter((function(e,n){return Object(m.a)(e),t[n]}))}(u,t).map((function(e){return Object(a.jsxs)("div",{children:[e.name," ",e.number,Object(a.jsx)("button",{onClick:function(){return function(e){window.confirm("are u sure u want to delete ".concat(e.name))&&n(e.id),r([])}(e)},children:"delete"})]},e.name)}))})},O=function(e){var n=e.notif;if(null===n)return null;var t={color:!0===n.error?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:5};return Object(a.jsx)("div",{style:t,children:n.message})},p=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],u=Object(o.useState)(""),s=Object(c.a)(u,2),d=s[0],b=s[1],f=Object(o.useState)(""),m=Object(c.a)(f,2),p=m[0],v=m[1],g=Object(o.useState)(""),x=Object(c.a)(g,2),w=x[0],N=x[1],S=Object(o.useState)(null),k=Object(c.a)(S,2),y=k[0],C=k[1];return Object(o.useEffect)((function(){return j.getAll().then((function(e){return r(e)}))}),[t.length]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(O,{notif:y}),Object(a.jsx)(i,{value:w,onChange:function(e){return N(e.target.value)}}),Object(a.jsx)("h3",{children:"add a new"}),Object(a.jsx)(l,{newName:d,setNewName:function(e){return b(e)},setNewNumber:function(e){return v(e)},newNumber:p,persons:t,setPersons:function(e){return r(e)},setNotif:function(e){return C(e)}}),Object(a.jsx)("h3",{children:"Numbers"}),Object(a.jsx)(h,{remove:j.remove,persons:t,setPersons:function(e){return r(e)},newFilter:w})]})};u.a.render(Object(a.jsx)(p,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d3af1c2d.chunk.js.map